import"./modulepreload-polyfill.js";let c=e=>{e.currentTarget.send("GetQrCode")};const s="sendMessage.html";let d=e=>{let t=e.currentTarget;try{let l=JSON.parse(e.data);switch(l==null?void 0:l.Type){case"wAProfile":i({inData:l.res,inWs:t});break;case"QrCodeGenerated":I({inQrReceived:l.res});break;default:break}}catch(l){}};const i=({inData:e,inWs:t})=>{e===void 0?t.send("GetQrCode"):(clearInterval(KSIntervalId),KSIntervalId=null,location.href=s)},I=({inQrReceived:e})=>{e!==void 0&&(S(),f(),KSQrRec=e,u({inQrCode:e}))};let S=()=>{let t=document.getElementById("HtmlGifId");t!==null&&(t.style.display="none")},f=()=>{let t=document.getElementById("ShowQrCodeDivId");t!==null&&(t.style.display="")},u=({inQrCode:e})=>{let t=document.getElementById("CanvasId");const l=t.dataset.QrCode;if(e===l)return;t.height=1,t.width=1,t.style.visibility="hidden",t.dataset.QrCode=e,t.dataset.CreatedDate=Date.now();let o={};o.text=e,o.bcid="qrcode",o.scaleX=2,o.scaleY=2,o.rotate="N";try{bwipjs.toCanvas(t,o),t.style.visibility="visible"}catch(n){console.log("error : ",n);return}},r=window.location.host,a;location.protocol==="https:"&&(a="wss://"+r);location.protocol==="http:"&&(a="ws://"+r);let w=()=>{m()},m=()=>{webSocket=new WebSocket(a),webSocket.onopen=c,webSocket.onmessage=d,webSocket.onclose=function(e){}};w();const h=()=>{const e=()=>{webSocket.send("WAProfile")};KSIntervalId||(KSIntervalId=setInterval(e,1e3))};h();
